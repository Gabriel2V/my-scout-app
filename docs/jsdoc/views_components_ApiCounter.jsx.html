<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: views/components/ApiCounter.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: views/components/ApiCounter.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @component ApiCounter
 * @description Widget fluttuante che monitora il consumo delle chiamate API in tempo reale.
 * FunzionalitÃ :
 * - Visualizza un badge compatto con il conteggio corrente.
 * - Si espande al click per mostrare statistiche dettagliate e barre di progresso.
 * - Cambia colore dinamicamente (Verde -> Giallo -> Rosso) in base alla percentuale di utilizzo.
 * - Utilizza `useApiUsageViewModel` per la sincronizzazione dei dati.
 */
import { useState } from 'react';
import { useApiUsageViewModel } from '../../viewmodels/useApiUsageViewModel';
import styles from '../../styles/ApiCounter.module.css';

export default function ApiCounter() {
  /**
   *  Dati di utilizzo API dal ViewModel.
   * @type {Object} 
   * Chiamate effettuate.
   * @property {number} usage.used
   * Limite giornaliero.
   * @property {number} usage.limit
   * Percentuale di consumo.
   * @property {number} usage.percentage 
   */
  const { usage } = useApiUsageViewModel(2000); // Polling ogni 2 secondi
  
  /**
   * Stato di espansione del widget 
   * @type {Array} 
   */
  const [isExpanded, setIsExpanded] = useState(false);

  // Se i dati non sono ancora pronti, non renderizzare nulla.
  if (!usage) return null;

  /**
   * Determina il colore di stato in base alla percentuale di utilizzo.
   * @returns {string} Codice colore esadecimale (es. #10b981).
   */
  const getColor = () => {
    if (usage.percentage >= 100) return '#ef4444'; // Rosso (Critico)
    if (usage.percentage >= 80) return '#f59e0b';  // Arancione (Warning)
    if (usage.percentage >= 50) return '#eab308'; // Giallo (Attenzione)
    return '#10b981'; // Verde (OK)
  };

  const color = getColor();

  return (
    &lt;div 
      className={styles.container}
      onClick={() => setIsExpanded(!isExpanded)}
    >
      {/* Stato Minimized: Solo Badge */}
      {!isExpanded &amp;&amp; (
        &lt;div className={styles.badge} style={{ backgroundColor: color }}>
          &lt;span>ðŸ“Š&lt;/span>
          &lt;span>{usage.used}/{usage.limit}&lt;/span>
        &lt;/div>
      )}

      {/* Stato Expanded: Pannello Dettagli */}
      {isExpanded &amp;&amp; (
        &lt;div className={styles.card} style={{ borderColor: color }}>
          &lt;div className={styles.header}>
            &lt;h4 className={styles.title}>API Usage&lt;/h4>
            &lt;span className={styles.icon}>ðŸ“Š&lt;/span>
          &lt;/div>

          &lt;div className={styles.progressTrack}>
            &lt;div 
              className={styles.progressFill}
              style={{ width: `${usage.percentage}%`, backgroundColor: color }} 
            />
          &lt;/div>

          &lt;div className={styles.statsContainer}>
            &lt;div className={styles.statRow}>
              &lt;span>Usate:&lt;/span>
              &lt;strong style={{ color }}>{usage.used}&lt;/strong>
            &lt;/div>
            &lt;div className={styles.statRow}>
              &lt;span>Rimanenti:&lt;/span>
              &lt;strong style={{ color: usage.remaining > 20 ? '#10b981' : '#ef4444' }}>
                {usage.remaining}
              &lt;/strong>
            &lt;/div>
          &lt;/div>

          {usage.percentage >= 80 &amp;&amp; (
            &lt;div className={`${styles.alertBox} ${usage.percentage >= 100 ? styles.alertCritical : styles.alertWarning}`}>
              {usage.percentage >= 100 ? 'Limite raggiunto!' : 'Limite quasi raggiunto!'}
            &lt;/div>
          )}
        &lt;/div>
      )}
    &lt;/div>
  );
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a></li><li><a href="module-Index.html">Index</a></li><li><a href="module-Models_Player.html">Models/Player</a></li><li><a href="module-Services_PlayerService.html">Services/PlayerService</a></li><li><a href="module-ViewModels_useApiUsageViewModel.html">ViewModels/useApiUsageViewModel</a></li><li><a href="module-ViewModels_useNationalTeamsViewModel.html">ViewModels/useNationalTeamsViewModel</a></li><li><a href="module-ViewModels_useNationsViewModel.html">ViewModels/useNationsViewModel</a></li><li><a href="module-ViewModels_usePlayerDetailViewModel.html">ViewModels/usePlayerDetailViewModel</a></li><li><a href="module-ViewModels_usePlayersViewModel.html">ViewModels/usePlayersViewModel</a></li><li><a href="module-ViewModels_useSearchViewModel.html">ViewModels/useSearchViewModel</a></li><li><a href="module-ViewModels_useSeriesViewModel.html">ViewModels/useSeriesViewModel</a></li><li><a href="module-ViewModels_useTeamsViewModel.html">ViewModels/useTeamsViewModel</a></li></ul><h3>Classes</h3><ul><li><a href="module-Models_Player.Player.html">Player</a></li><li><a href="module-Services_PlayerService-PlayerService.html">PlayerService</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Fri Feb 13 2026 17:37:27 GMT+0100 (Ora standard dellâ€™Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
