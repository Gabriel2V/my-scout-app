<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: views/PlayerDetailView.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: views/PlayerDetailView.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @component PlayerDetailView
 * @description Vista di dettaglio del singolo calciatore.
 * * **Features:**
 * - **Contextual Navigation:** Permette di scorrere tra i giocatori (Prev/Next) mantenendo il filtro della lista precedente.
 * - **Deep Linking:** Gestisce l'accesso diretto via URL o la navigazione dalla lista.
 * - **Cross-Navigation:** Permette di saltare alla squadra o alla ricerca nazione cliccando sui metadati.
 */
import React from 'react';
import { useParams, useLocation, useNavigate } from 'react-router-dom';
import { usePlayerDetailViewModel } from '../viewmodels/usePlayerDetailViewModel';
import styles from '../styles/PlayerDetailView.module.css';

export default function PlayerDetailView() {
  const { id } = useParams();
  const location = useLocation();
  const navigate = useNavigate();

  // Recupero stato di navigazione (per pulsante "Indietro" intelligente e liste contesto)
  const initialPlayer = location.state?.player || null;
  const contextList = location.state?.contextList || []; 
  const returnPath = location.state?.from || '/'; 

  const { player, prevPlayer, nextPlayer, loading, error } = usePlayerDetailViewModel(id, initialPlayer, contextList);

  /** Naviga al giocatore adiacente preservando il contesto */
  const goToPlayer = (targetPlayer) => {
    navigate(`/giocatori/${targetPlayer.id}`, { 
      state: { 
        player: targetPlayer, 
        contextList: contextList, 
        from: returnPath 
      } 
    });
  };

  /** Naviga alla lista giocatori della squadra */
  const handleTeamClick = () => {
    if (player.teamId) {
      navigate(`/squadre/${player.teamId}/giocatori`);
    }
  };

  /** Cerca la nazione globalmente */
  const handleNationalityClick = () => {
    if (player.nationality) {
      navigate(`/ricerca?q=${encodeURIComponent(player.nationality)}`);
    }
  };

  if (loading) return &lt;div className={styles.loading}>Caricamento dettagli...&lt;/div>;

  if (error) {
    return (
      &lt;div className={styles.container} style={{ textAlign: 'center', color: '#333' }}>
        &lt;h2>{error}&lt;/h2>
        &lt;button onClick={() => navigate(returnPath)} className={styles.backBtn}>Torna indietro&lt;/button>
      &lt;/div>
    );
  }

  if (!player) return null;

  const formattedRating = player.rating &amp;&amp; player.rating !== "N/A" 
    ? parseFloat(player.rating).toFixed(1) 
    : "N/A";

  return (
    &lt;div className={styles.container}>
      &lt;div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>
        &lt;button onClick={() => navigate(returnPath)} className={styles.backBtn}>
          ← Torna alla lista
        &lt;/button>
      &lt;/div>
      
      {/* Controlli di navigazione contesto (Prev/Next) */}
      {prevPlayer &amp;&amp; (
        &lt;button 
          className={`${styles.navArrow} ${styles.navArrowLeft}`}
          onClick={() => goToPlayer(prevPlayer)}
          title={`Vai a ${prevPlayer.name}`}
        >
          ‹
        &lt;/button>
      )}

      {nextPlayer &amp;&amp; (
        &lt;button 
          className={`${styles.navArrow} ${styles.navArrowRight}`}
          onClick={() => goToPlayer(nextPlayer)}
          title={`Vai a ${nextPlayer.name}`}
        >
          ›
        &lt;/button>
      )}

      &lt;div className={styles.detailCard}>
        &lt;div className={styles.header}>
          &lt;img src={player.photo} alt={player.name} className={styles.mainPhoto} />
          &lt;h1>{player.name}&lt;/h1>
        &lt;/div>
        
        &lt;div className={styles.infoGrid}>
          &lt;div className={styles.infoItem}>
            &lt;strong>Squadra&lt;/strong> 
            &lt;span 
              onClick={handleTeamClick} 
              className={player.teamId ? styles.clickableLink : ''}
              title={player.teamId ? "Vedi rosa squadra" : ""}
            >
              {player.team}
            &lt;/span>
          &lt;/div>

          &lt;div className={styles.infoItem}>
            &lt;strong>Nazionalità&lt;/strong> 
            &lt;span 
              onClick={handleNationalityClick}
              className={styles.clickableLink}
              title="Cerca nazione"
            >
              {player.nationality}
            &lt;/span>
          &lt;/div>

          &lt;div className={styles.infoItem}>&lt;strong>Età&lt;/strong> &lt;span>{player.age}&lt;/span>&lt;/div>
          &lt;div className={styles.infoItem}>
            &lt;strong>Rating&lt;/strong> &lt;span className={styles.rating}>{formattedRating}&lt;/span>
          &lt;/div>
          &lt;div className={styles.infoItem}>&lt;strong>Gol Stagionali&lt;/strong> &lt;span>{player.goals}&lt;/span>&lt;/div>
          &lt;div className={styles.infoItem}>&lt;strong>Ruolo&lt;/strong> &lt;span>{player.position}&lt;/span>&lt;/div>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  );
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a></li><li><a href="module-Index.html">Index</a></li><li><a href="module-Models_Player.html">Models/Player</a></li><li><a href="module-Services_PlayerService.html">Services/PlayerService</a></li><li><a href="module-ViewModels_useApiUsageViewModel.html">ViewModels/useApiUsageViewModel</a></li><li><a href="module-ViewModels_useNationalTeamsViewModel.html">ViewModels/useNationalTeamsViewModel</a></li><li><a href="module-ViewModels_useNationsViewModel.html">ViewModels/useNationsViewModel</a></li><li><a href="module-ViewModels_usePlayerDetailViewModel.html">ViewModels/usePlayerDetailViewModel</a></li><li><a href="module-ViewModels_usePlayersViewModel.html">ViewModels/usePlayersViewModel</a></li><li><a href="module-ViewModels_useSearchViewModel.html">ViewModels/useSearchViewModel</a></li><li><a href="module-ViewModels_useSeriesViewModel.html">ViewModels/useSeriesViewModel</a></li><li><a href="module-ViewModels_useTeamsViewModel.html">ViewModels/useTeamsViewModel</a></li></ul><h3>Classes</h3><ul><li><a href="module-Models_Player.Player.html">Player</a></li><li><a href="module-Services_PlayerService-PlayerService.html">PlayerService</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Thu Feb 05 2026 16:16:06 GMT+0100 (Ora standard dell’Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
